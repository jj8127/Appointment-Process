앱 빌드: [시작 전에 버전 업데이트 필수]eas build --platform android --profile production  / eas build --platform ios --profile production
iOS 번들ID 등록/Apple 점검 페이지 오류 우회:
    1) Apple 로그인 자동등록을 건너뛰고 기존 원격 인증서로 빌드
       eas build --platform ios --profile production --non-interactive --freeze-credentials
    2) 위 명령이 자격증명 누락으로 실패하면 Apple Developer 점검 종료 후 재시도
       eas credentials:configure-build -p ios -e production
       eas build --platform ios --profile production
안드로이드 난독화/가독화파일 확인:
    1) eas build --platform android --profile production
    2) 빌드 완료 후 Build artifacts에서 mapping.txt 다운로드
    3) Play Console > App bundle explorer > 해당 AAB > Deobfuscation files에 mapping.txt 업로드
앱 실행+설치: npx expo run:android
웹 실행:cd web & npm run dev
아이폰 빌드 제출: eas submit -p ios --latest

ios에서 테스트
    npx expo start 하고 Expo Go 모드로 전환 -> QR코드 스캔
testsprite 사용하기 위한 순서
1. 웹 번들 생성 
    npx expo export --platform web --output-dir dist-web
    npx serve -l 8081 dist-web
2. 이전 실행 락이 있다면 삭제(없으면 생략)
    del testsprite_tests\tmp\execution.lock

codex에서 사용 가능한 도구 목록 보기
1. codex 접속
    codex
2. 도구 찾기
    list_mcp_tools

vercel에 등록하기
1. 배포하고자 하는 루트 디렉토리로 이동
2. vercel과 연동
    vercel link
3. 웹 빌드 생성
    npx expo export -p web
4. 배포
    vercel deploy dist --prod

앱 데이터 초기화
    adb uninstall com.jj8127.Garam_in
    
앱 icon적용 한 버전 실행하기
    앱 삭제 후 -> npx expo prebuild --clean && npx expo run:android

expo mcp server로 앱 실행하기 [앱이 설치 되어 있다는 전제 하에]
    .\start-mcp.ps1

app store connect에 가장 최근에 빌드한 앱 올리기
    eas submit --platform ios --latest

비밀번호 hash값 slat값 알아보는 명령어
node -e "const crypto=require('crypto');const password='qwer1234!';const salt=crypto.randomBytes(16);const hash=crypto.pbkdf2Sync(password,salt,100000,32,'sha256');console.log('PASSWORD_SALT:',salt.toString('base64'));console.log('PASSWORD_HASH:',hash.toString('base64'));"

본부장(매니저) 읽기 전용 계정 추가
1) 로컬에서 해시/솔트 생성 (비번=새비번으로 변경)
   node -e "const crypto=require('crypto');const password='새비번';const salt=crypto.randomBytes(16);const hash=crypto.pbkdf2Sync(password,salt,100000,32,'sha256');console.log('phone=01012341234');console.log('password_salt(base64)=',salt.toString('base64'));console.log('password_hash(base64)=',hash.toString('base64'));"
2) Supabase SQL Editor에서 계정 생성
   insert into public.manager_accounts (name, phone, password_hash, password_salt, password_set_at, active)
   values ('홍길동 본부장', '01012341234', '<hash>', '<salt>', now(), true);
3) 필요 시 잠금 해제/초기화
   update public.manager_accounts set failed_count=0, locked_until=null where phone='01012341234';

본부장(매니저) 계정 조회 쿼리
select id, name, phone, active, failed_count, locked_until, password_set_at
from public.manager_accounts
order by created_at desc;

계정 비밀번호 변경하는 쿼리
update public.manager_accounts
set password_hash = '해시',
    password_salt = '솔트',
    password_set_at = now(),
    failed_count = 0,
    locked_until = null
where phone = '전화번호';

FC계정 추가하는 쿼리
with new_fc as (
  insert into public.fc_profiles (
    name, affiliation, phone, recommender, email
  ) values (
    '홍길동', '1본부', '01012345678', '추천인명', 'hong@example.com'
  )
  returning id
)
insert into public.fc_credentials (
  fc_id, password_hash, password_salt, password_set_at
)
select id, 'xQQHy6CYaPEbITE0pW/OOV1nD2pj+SKD0HsV/U6i/R0=', 'KBNCCjmnwPbFakBouBWF3Q==', now()
from new_fc;

