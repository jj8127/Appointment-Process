{
  "meta": {
    "project": "FC Onboarding App",
    "date": "2025-12-10",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "FC Onboarding App is a React Native-based platform facilitating onboarding and management for Field Coordinators (FCs) and administrators, offering authentication, onboarding progress tracking, document uploads, exam registration, messaging, and appointment scheduling.",
  "core_goals": [
    "Enable secure role-based authentication for admins and FC users with persistent session management and push notification registration.",
    "Provide a dynamic home dashboard showing relevant metrics and real-time updates tailored to user roles.",
    "Guide FC users through structured allowance consent workflow with status tracking and admin notifications.",
    "Facilitate document uploads by FCs with progress tracking and enable admin review with notification features.",
    "Support comprehensive exam registration and management for life and non-life exams with admin dashboards to monitor applicant status.",
    "Implement real-time messaging and notices with media attachment support between FCs and admins.",
    "Allow FC profile editing, appointment management including mobile scheduling, and admin oversight of onboarding steps."
  ],
  "key_features": [
    "Role-based session management with secure storage and push token registration.",
    "Home dashboard displaying admin metrics or FC onboarding progress with real-time Supabase updates.",
    "Stepwise allowance consent process capturing user data and notifying admins.",
    "Document upload interface integrated with Supabase storage featuring upload progress feedback.",
    "Dual exam registration forms and admin dashboards for life and non-life exams tracking.",
    "Real-time 1:1 chat with media/file attachments and broadcast notice viewing for FCs.",
    "FC profile editing, appointment URL handling, and onboarding management by admins including scheduling."
  ],
  "user_flow_summary": [
    "User logs in as admin or FC; session is persisted securely and push notifications are enabled.",
    "FC user is presented with onboarding progress on the home screen; admins see key metrics and notices.",
    "FC completes allowance consent workflow with slide completions, data submission, and profile status update.",
    "FC uploads required documents with progress feedback; admins receive notifications and review document statuses.",
    "FC applies for life or non-life exams via respective forms; admins track applications and manage scheduling.",
    "FC and admin exchange real-time messages including media; admins broadcast notices to FCs.",
    "FC edits profile and manages appointments; admins oversee onboarding progress and appointment scheduling."
  ],
  "validation_criteria": [
    "Role-based login correctly permits access only to authorized users and persists sessions across app restarts.",
    "Dashboard updates dynamically with real-time data syncing and accurately reflects user role information.",
    "Allowance consent workflow completes successfully, updating user profile status and notifying admins.",
    "Document uploads complete reliably with accurate progress reporting; admins receive timely notifications.",
    "Exam registrations are accurately recorded, and admin dashboards display current applicant statuses.",
    "Messaging functions in real-time with support for media attachments; notices are properly broadcast and visible.",
    "Profile edits persist correctly; appointment scheduling mechanisms work across device types; admin controls effectively manage onboarding steps."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React Native (Expo Router)",
      "Supabase",
      "React Query",
      "React Hook Form",
      "Expo Modules (Notifications, Device, File System)",
      "Zod"
    ],
    "features": [
      {
        "name": "Session and authentication",
        "description": "Handles role-based login for admins and FC users, persists session to secure storage, restores on launch, and registers push tokens for signed-in users.",
        "files": [
          "app/auth.tsx",
          "hooks/use-session.tsx",
          "lib/notifications.ts",
          "lib/safe-storage.ts"
        ]
      },
      {
        "name": "Home dashboard and onboarding progress",
        "description": "Landing screen shows admin metrics or FC onboarding progress, quick links to key flows, latest notices/messages, and real-time updates via Supabase channels.",
        "files": [
          "app/index.tsx"
        ]
      },
      {
        "name": "Allowance consent workflow",
        "description": "Guides FCs through allowance agreement steps, tracks slide completion, collects temp ID and consent date, updates profile status, and notifies admins.",
        "files": [
          "app/consent.tsx"
        ]
      },
      {
        "name": "Document upload and notification",
        "description": "FCs upload required documents to Supabase storage with progress feedback; admins receive notifications and can review statuses for each document.",
        "files": [
          "app/docs-upload.tsx"
        ]
      },
      {
        "name": "Exam registration and management",
        "description": "Provides life/non-life exam application forms and admin registration dashboards for scheduling and tracking applicant status across both exam types.",
        "files": [
          "app/exam-apply.tsx",
          "app/exam-apply2.tsx",
          "app/exam-register.tsx",
          "app/exam-register2.tsx",
          "app/exam-manage.tsx",
          "app/exam-manage2.tsx"
        ]
      },
      {
        "name": "Messaging and notices",
        "description": "Real-time 1:1 chat between FCs and admins with media/file attachments, plus admin notice creation and FC notice viewing for broadcast updates.",
        "files": [
          "app/chat.tsx",
          "app/admin-messenger.tsx",
          "app/admin-notice.tsx",
          "app/notice.tsx"
        ]
      },
      {
        "name": "Appointment and profile management",
        "description": "Supports FC profile editing, appointment URL handling, and admin oversight of onboarding steps including mobile appointment scheduling.",
        "files": [
          "app/fc/new.tsx",
          "app/appointment.tsx",
          "app/dashboard.tsx"
        ]
      }
    ]
  }
}
